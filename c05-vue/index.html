<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | 面试</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="面试问题">
    
    <link rel="preload" href="/interview/assets/css/0.styles.0d8df7ee.css" as="style"><link rel="preload" href="/interview/assets/js/app.1123253c.js" as="script"><link rel="preload" href="/interview/assets/js/2.9f7d206a.js" as="script"><link rel="preload" href="/interview/assets/js/22.702c5f0a.js" as="script"><link rel="prefetch" href="/interview/assets/js/10.647fc602.js"><link rel="prefetch" href="/interview/assets/js/11.3bded98d.js"><link rel="prefetch" href="/interview/assets/js/12.a59c2e05.js"><link rel="prefetch" href="/interview/assets/js/13.d1d40200.js"><link rel="prefetch" href="/interview/assets/js/14.7191c7f4.js"><link rel="prefetch" href="/interview/assets/js/15.8a523475.js"><link rel="prefetch" href="/interview/assets/js/16.246f1efb.js"><link rel="prefetch" href="/interview/assets/js/17.11000072.js"><link rel="prefetch" href="/interview/assets/js/18.b29c8972.js"><link rel="prefetch" href="/interview/assets/js/19.61806da9.js"><link rel="prefetch" href="/interview/assets/js/20.0fbf0908.js"><link rel="prefetch" href="/interview/assets/js/21.05ba5c61.js"><link rel="prefetch" href="/interview/assets/js/23.5f1a737d.js"><link rel="prefetch" href="/interview/assets/js/24.69c6d2ef.js"><link rel="prefetch" href="/interview/assets/js/25.4d8a90bc.js"><link rel="prefetch" href="/interview/assets/js/26.bd40b0bc.js"><link rel="prefetch" href="/interview/assets/js/27.0dc23fb9.js"><link rel="prefetch" href="/interview/assets/js/28.0603bbcd.js"><link rel="prefetch" href="/interview/assets/js/29.1dac03cf.js"><link rel="prefetch" href="/interview/assets/js/3.7fa024a0.js"><link rel="prefetch" href="/interview/assets/js/30.430ab50c.js"><link rel="prefetch" href="/interview/assets/js/4.b7d0708f.js"><link rel="prefetch" href="/interview/assets/js/5.9e2f4ca7.js"><link rel="prefetch" href="/interview/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/interview/assets/js/7.f39602d3.js"><link rel="prefetch" href="/interview/assets/js/8.17f65d31.js"><link rel="prefetch" href="/interview/assets/js/9.3efbd6c1.js">
    <link rel="stylesheet" href="/interview/assets/css/0.styles.0d8df7ee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/interview/" class="home-link router-link-active"><img src="/interview/assets/img/interview.png" alt="面试" class="logo"> <span class="site-name can-hide">面试</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview/c00-prepare/" class="nav-link">
  面试环节
</a></div><div class="nav-item"><a href="/interview/c01-html5/" class="nav-link">
  HTML5
</a></div><div class="nav-item"><a href="/interview/c02-css3/" class="nav-link">
  CSS3
</a></div><div class="nav-item"><a href="/interview/c03-javascript-es6+/" class="nav-link">
  JavaScript(ES6+)
</a></div><div class="nav-item"><a href="/interview/c04-network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/interview/c05-vue/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/c06-fe-project/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/interview/c07-node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/interview/c08-data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/interview/c09-algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/interview/c10-design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/interview/c11-typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/interview/c12-web-security/" class="nav-link">
  Web 安全
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jsliweijun/interview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview/c00-prepare/" class="nav-link">
  面试环节
</a></div><div class="nav-item"><a href="/interview/c01-html5/" class="nav-link">
  HTML5
</a></div><div class="nav-item"><a href="/interview/c02-css3/" class="nav-link">
  CSS3
</a></div><div class="nav-item"><a href="/interview/c03-javascript-es6+/" class="nav-link">
  JavaScript(ES6+)
</a></div><div class="nav-item"><a href="/interview/c04-network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/interview/c05-vue/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/c06-fe-project/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/interview/c07-node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/interview/c08-data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/interview/c09-algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/interview/c10-design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/interview/c11-typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/interview/c12-web-security/" class="nav-link">
  Web 安全
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jsliweijun/interview" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/interview/c05-vue/" aria-current="page" class="active sidebar-link">Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_1-谈谈你对-mvvm-对理解" class="sidebar-link">1. 谈谈你对 MVVM 对理解 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_2-请说一下-vue2-响应式数据的理解" class="sidebar-link">2. 请说一下 Vue2 响应式数据的理解 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_3-vue-中如何检测数组变化" class="sidebar-link">3. Vue 中如何检测数组变化 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_4-vue-中如何进行依赖收集" class="sidebar-link">4. Vue 中如何进行依赖收集 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_5-如何理解-vue-中模版编译原理-核心问题-如何将-template-转换成-render-函数" class="sidebar-link">5. 如何理解 Vue 中模版编译原理 ？ 核心问题：如何将 template 转换成 render 函数？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_6-vue-生命周期钩子是如何实现的" class="sidebar-link">6. Vue 生命周期钩子是如何实现的 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_7-vue-生命周期方法有哪些-一般在哪一步发送请求及其原因" class="sidebar-link">7. Vue 生命周期方法有哪些？ 一般在哪一步发送请求及其原因？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_8-vue-mixin-使用场景和原理" class="sidebar-link">8. Vue.mixin 使用场景和原理</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_9-vue-组件-data-为什么必须是个函数" class="sidebar-link">9. Vue 组件 data 为什么必须是个函数 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_10-vm-nexttick-在哪里使用-原理是什么" class="sidebar-link">10. vm.$nextTick 在哪里使用？ 原理是什么？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_11-computed-和-watch-区别" class="sidebar-link">11. computed 和 watch 区别 ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_12-vue-set-obj-prop-index-value-方法是如何实现的" class="sidebar-link">12. Vue.set(obj,prop/index,value) 方法是如何实现的？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_13-vue-为什么需要虚拟-dom" class="sidebar-link">13. vue 为什么需要虚拟 DOM ？</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_14-vue-中的-diff-算法原理" class="sidebar-link">14. Vue 中的 diff 算法原理</a></li><li class="sidebar-sub-header"><a href="/interview/c05-vue/#_15-既然-vue-通过数据劫持可以精准探测数据变化-为什么还需要虚拟-dom-进行-diff-检测差异" class="sidebar-link">15. 既然 Vue 通过数据劫持可以精准探测数据变化，为什么还需要虚拟 DOM 进行 diff 检测差异</a></li></ul></li><li><a href="/interview/c05-vue/s01.html" class="sidebar-link">vue2 响应式原理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h1> <h2 id="_1-谈谈你对-mvvm-对理解"><a href="#_1-谈谈你对-mvvm-对理解" class="header-anchor">#</a> 1. 谈谈你对 MVVM 对理解 ？</h2> <p>目标：职责划分，分层（将 Model 层，view 层进行分类）借鉴后端思想。对于前端而言就是如何将数据同步到页面。
mvc 模式： 但在前端，数据变化无法同步到视图中。需要将逻辑聚拢在 controller 层。</p> <p>mvvm 模式：映射关系简化，（隐藏了 controller） ，开发不需要关注数据与 dom 的关联关系，转化关系。只用关注数据的变化。viewModel：类似实现 v-model ，Object.defineProperty()。</p> <p>MVVM 模式：它是一种分层模式，目的是为了职责明确划分层级，借鉴了后端项目的思想，类似于 mvc 。
MVVM 的具体内容： m model， v view ， vm view Model 视图模型对象。</p> <h2 id="_2-请说一下-vue2-响应式数据的理解"><a href="#_2-请说一下-vue2-响应式数据的理解" class="header-anchor">#</a> 2. 请说一下 Vue2 响应式数据的理解 ？</h2> <p>响应式数据：数据变了，页面(视图)更新成最新的数据。
不管：页面数据变了，model 的数据变成最新的。</p> <p>Vue 底层实现是通过对 数组和对象类型的值发生变化时，进行了劫持。<br>
对象内部通过 <code>defineReactive</code> 方法，使用 <code>Object.defineProperty(obj,prorp,{})</code> 将属性进行劫持（只会劫持已经存在的属性）。
数组 是通过重写数组方法来实现。 <code>push pop shift unshift splice sort reverce</code> 。
多层对象是通过递归来实现劫持。</p> <h2 id="_3-vue-中如何检测数组变化"><a href="#_3-vue-中如何检测数组变化" class="header-anchor">#</a> 3. Vue 中如何检测数组变化 ？</h2> <p>数组考虑性能原因没有使用 <code>Object.defineProperty</code> 对数组的每一项惊喜拦截，是通过重写数组
的 7 个方法。<br>
数组中如果是对象数据类型也会进行递归劫持<br>
数组的索引和长度变化是无法监控到的。</p> <h2 id="_4-vue-中如何进行依赖收集"><a href="#_4-vue-中如何进行依赖收集" class="header-anchor">#</a> 4. Vue 中如何进行依赖收集 ？</h2> <p>每个属性都拥有自己的 <code>dep</code> 属性， 它用于存放所依赖的 watcher （渲染 watcher， computed watcher ，watch 用户 watcher） ，当属性变化后 set 就会通知自己对应的 watcher 去更新。</p> <p>默认在初始化时会调用 render 函数，此时会触发属性依赖收集 <code>dep.depend</code>。
当属性发生修改时会触发 <code>watcher</code> 更新 <code>dep.notify()</code></p> <h2 id="_5-如何理解-vue-中模版编译原理-核心问题-如何将-template-转换成-render-函数"><a href="#_5-如何理解-vue-中模版编译原理-核心问题-如何将-template-转换成-render-函数" class="header-anchor">#</a> 5. 如何理解 Vue 中模版编译原理 ？ 核心问题：如何将 template 转换成 render 函数？</h2> <p>主要就是做了三步。</p> <ol><li>将 template 模版转化成 ast 语法树。 <code>parseHTML</code> . 使用了正则匹配方式，一个对象结构，记录 html 树结构</li> <li><code>optimize</code> 对静态语法 做 静态标记 markup 。 用于为 <code>diff</code> 阶段做优化，如果是静态节点就跳过 diff 操作。</li> <li>重新生成代码 <code>code = generate(ast,options)</code> 。 后面通过 new Function 变成 render 函数，将这个代码执行创建出 vnode。</li></ol> <h2 id="_6-vue-生命周期钩子是如何实现的"><a href="#_6-vue-生命周期钩子是如何实现的" class="header-anchor">#</a> 6. Vue 生命周期钩子是如何实现的 ？</h2> <p>它们是回调函数，当创建组件实例的过程，进行调用对应的钩子方法。<code>callHook(vm,'beforeCreate')</code><br>
内部会对钩子函数进行处理，将钩子函数维护成数组的形势。</p> <h2 id="_7-vue-生命周期方法有哪些-一般在哪一步发送请求及其原因"><a href="#_7-vue-生命周期方法有哪些-一般在哪一步发送请求及其原因" class="header-anchor">#</a> 7. Vue 生命周期方法有哪些？ 一般在哪一步发送请求及其原因？</h2> <p><code>beforeCreate</code> 在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。</p> <p><code>created</code> 实例已经创建完成之后被调用。在这一步，实例已完成以下的配置：数据观测(data observer)，属性和方法的运算， watch/event 事件回调。这里没有$el</p> <p><code>beforeMount</code> 在挂载开始之前被调用：相关的 render 函数首次被调用。</p> <p><code>mounted</code> el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子。</p> <p><code>beforeUpdate</code> 数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。</p> <p><code>updated</code> 由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。</p> <p><code>beforeDestroy</code> 实例销毁之前调用。在这一步，实例仍然完全可用。</p> <p><code>destroyed</code> Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。</p> <p><code>keep-alive</code> (activated 和 deactivated)</p> <p>在哪发送请求都可以，主要看具体你要做什么事 !!!<br>
如果是 ssr 的 vue 项目 ，会在 <code>created</code> 钩子上。</p> <h2 id="_8-vue-mixin-使用场景和原理"><a href="#_8-vue-mixin-使用场景和原理" class="header-anchor">#</a> 8. Vue.mixin 使用场景和原理</h2> <p>Vue.mixin 是全局混人，使用后每个创建的组件实例都会被影响。一般用于作为 <strong>插件</strong> 发布。</p> <p>原理：当组件初始化时会被调用 <code>mergeOptions</code> 方法进行合并，采用策略模式针对不同的数据进行不同的合并。如果混人的数据和本身组件中的数据冲突，就采用“就近原则” 以组件的数据为准。</p> <p>建议:建议少用，会用数据来源不清晰的问题，命名冲突问题，依赖问题。</p> <h2 id="_9-vue-组件-data-为什么必须是个函数"><a href="#_9-vue-组件-data-为什么必须是个函数" class="header-anchor">#</a> 9. Vue 组件 data 为什么必须是个函数 ？</h2> <p>每次使用组件时都会对组件进行实例化操作，并调用 data 函数返回一个对象作为组件的数据源。这样可以保证多个组件间数据互不影响。</p> <h2 id="_10-vm-nexttick-在哪里使用-原理是什么"><a href="#_10-vm-nexttick-在哪里使用-原理是什么" class="header-anchor">#</a> 10. vm.$nextTick 在哪里使用？ 原理是什么？</h2> <p><code>vm.$nextTick</code> 中的回调是在下次 DOM 更新结束后执行的回调函数，用于获取更新后的 DOM。</p> <p>原理：Vue 中视图数据更新是异步的，使用 <code>vm.$nextTick</code> 方法可以保证用户定义的逻辑在视图更新之后执行。</p> <h2 id="_11-computed-和-watch-区别"><a href="#_11-computed-和-watch-区别" class="header-anchor">#</a> 11. computed 和 watch 区别 ？</h2> <p>底层实现：
computed 和 watch 都是基于 Watcher 来实现的。
computed 属性具备缓存，依赖的值不发生变化，对计算属性取值不会重新执行它的方法。
watch 是监视值的变化，当值发生变化时调用对应的回调函数。用法 可以对对象属性深度监视，立即执行。</p> <h2 id="_12-vue-set-obj-prop-index-value-方法是如何实现的"><a href="#_12-vue-set-obj-prop-index-value-方法是如何实现的" class="header-anchor">#</a> 12. Vue.set(obj,prop/index,value) 方法是如何实现的？</h2> <p>这个方法是给对象，数组增加响应式数据。
当给对象新增不存在的属性，会先将属性定义成响应式的，调用 <code>defineReactive</code>，然后触发对象依赖的 watcher 去更新。
当修改数组索引时，应该是调用数组本身的 splice 方法去更新数组。因为数组初始化时，已经 splice 被劫持修改成响应式的了。</p> <h2 id="_13-vue-为什么需要虚拟-dom"><a href="#_13-vue-为什么需要虚拟-dom" class="header-anchor">#</a> 13. vue 为什么需要虚拟 DOM ？</h2> <ol><li>virtual dom 是用 js 对象来描述真实的 DOM ，是对真实 DOM 的抽象。</li> <li>由于直接操作 DOM 性能低，但是 JS 层的操作效率高，可以将 DOM 操作转化成对象的操作，最终通过 diff 算法对比差异进行更新 DOM（减少了对真实 DOM 的操作）</li> <li>虚拟 DOM 不依赖真实平台环境，能实现跨平台。</li></ol> <h2 id="_14-vue-中的-diff-算法原理"><a href="#_14-vue-中的-diff-算法原理" class="header-anchor">#</a> 14. Vue 中的 diff 算法原理</h2> <p>Vue 的 diff 算法是平级比较，不考虑跨级比较多情况。内部采用深度递归多方式 + 双指针的方式进行比较。<br>
采用复用的原理</p> <ol><li>先比较是否相同节点 tag ，key</li> <li>相同节点比较属性，并复用老节点</li> <li>比较儿子节点，考虑老节点和新节点儿子的情况</li> <li>优化比较：头头，尾尾，头尾，尾头</li> <li>比对查找进行复用</li></ol> <h2 id="_15-既然-vue-通过数据劫持可以精准探测数据变化-为什么还需要虚拟-dom-进行-diff-检测差异"><a href="#_15-既然-vue-通过数据劫持可以精准探测数据变化-为什么还需要虚拟-dom-进行-diff-检测差异" class="header-anchor">#</a> 15. 既然 Vue 通过数据劫持可以精准探测数据变化，为什么还需要虚拟 DOM 进行 diff 检测差异</h2> <p>响应式数据变化，Vue 确实可以在数据发生变化时，响应式系统可以立即得知。但是如果给每个属性都添加 watcher 用于更新的话，会产生大量的 watcher 从而降低性能。</p> <p>而且粒度过细也会导致更新不精准的问题，所以 vue 采用了组件级的 watcher 配合 diff 来检测差异。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/interview/c05-vue/s01.html">
        vue2 响应式原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/interview/assets/js/app.1123253c.js" defer></script><script src="/interview/assets/js/2.9f7d206a.js" defer></script><script src="/interview/assets/js/22.702c5f0a.js" defer></script>
  </body>
</html>
